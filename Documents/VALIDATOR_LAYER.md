# 계층별 유효성 검증(validator) 나누기

## 유효성 검증
* 일반적으로 validator는 컨트롤러 단에서만 사용하여 
* 컨트롤러에서 얕은 부분부터 깊은 부분까지 모두 검사하여
* 적절한 처리를 하였다.
* 그러나 아래와 같은 고민이 생겼다.

## 고민
* 컨트롤러 단에서 너무 깊에 validation하는것이 아닐까?
* 계층을 나누어서 적절한 값을 처리하는데(mvc), validator도 계층을 나누어서 각각의 역할에 맞게 깊이를 조절하여 체크해야하지 않을까?
* 이런 고민이 생겼고, 결국 계층별로 validator를 나누어서 처리하였다.

## 계층나누기
* 엔티티에 컴포넌트 객체를 넣는 것은 부적절하다고 생각한다.
* 갑자기 컴포넌트 객체가 왜 나왔냐면 validator는 리파지토리를 생성자 주입하여서
* db에서 데이터를 꺼내서 입력받은 값을 가지고 판단하기 때문이다.
* 따라서 validator는 컴포넌트 객체이다.
* 이에 따라 계층은 사실상 두가지로 나누어졌다.
* 바인딩을 체크하는, 즉 입력된 값의 포맷팅이 맞는지
* 즉 길이, null 등을 체크하는 controller validator와
* 도메인 로직을 호출하여 트랜잭션 처리를 하는 service validator로 나누었다.

## controller validator
* 바인딩을 주로 체크한다.
* 사이즈가 맞는지, 문자열이 널이 아닌지
* 숫자형 타입이 양수인지, 음수인지 등을 체크하고 넘어간다.

## service validator
* controller 보다 깊게 체크한다.
* 비밀번호가 맞는지, 가능한 값인지 등 도메인 로직에 기반하여 
* 값이 적절한지 체크한다.